<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <style>
        #ui { position: fixed; top: 10px; left: 10px; z-index: 1000; background: rgba(255,255,255,0.7); padding: 10px; border-radius: 5px; font-family: sans-serif; pointer-events: none; }
    </style>
</head>
<body style="margin: 0; overflow: hidden;">

    <div id="ui">
        <b>Mode Multi-Détection (1-200)</b><br>
        Pointez la caméra vers un dessin.
    </div>

    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;">
        
        <a-entity camera></a-entity>

        <a-entity id="liste-marqueurs"></a-entity>

    </a-scene>

    <script>
        const scene = document.getElementById('liste-marqueurs');
        const totalEleves = 200;

        for (let i = 1; i <= totalEleves; i++) {
            // 1. Création de l'entité marqueur
            const marker = document.createElement('a-marker');
            marker.setAttribute('type', 'pattern');
            marker.setAttribute('url', `data/eleve_${i}.patt`);
            marker.setAttribute('id', `marker-${i}`);

            // 2. Création de l'image associée
            const image = document.createElement('a-image');
            image.setAttribute('src', `data/image_${i}.png`);
            image.setAttribute('rotation', '-90 0 0');
            image.setAttribute('width', '2');
            image.setAttribute('height', '2');
            image.setAttribute('position', '0 0 0');

            // 3. On emboîte le tout
            marker.appendChild(image);
            scene.appendChild(marker);
        }
    </script>
</body>
</html>
