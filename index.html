<!DOCTYPE html>
<html>
<head>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <style>
        #ui { position: fixed; top: 10px; left: 10px; z-index: 1000; background: rgba(255,255,255,0.8); padding: 15px; border-radius: 8px; font-family: sans-serif; }
        .search-input { width: 200px; padding: 5px; margin-bottom: 5px; }
        .status { font-size: 12px; color: #444; }
    </style>
</head>
<body style="margin: 0; overflow: hidden;">

    <div id="ui">
        <b>RA Scolaire - 200 Élèves</b><br>
        <input type="text" id="search" class="search-input" placeholder="Chercher n° élève (1-200)..."><br>
        <span class="status" id="status">Scannez le marqueur correspondant</span>
    </div>

    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;">
        <a-marker id="main-marker" type="pattern" url="data/eleve_1.patt">
            <a-image id="main-image" src="data/image_1.png" rotation="-90 0 0" width="1" height="1"></a-image>
        </a-marker>

        <a-entity camera></a-entity>
    </a-scene>

    <script>
        const searchInput = document.getElementById('search');
        const markerTag = document.getElementById('main-marker');
        const imageTag = document.getElementById('main-image');
        const statusText = document.getElementById('status');

        searchInput.addEventListener('input', (e) => {
            const num = e.target.value;
            
            // Vérification si le nombre est entre 1 et 200
            if (num >= 1 && num <= 200) {
                const newPatt = `data/eleve_${num}.patt`;
                const newImg = `data/image_${num}.png`;

                // Mise à jour dynamique du marqueur et de l'image
                markerTag.setAttribute('url', newPatt);
                imageTag.setAttribute('src', newImg);
                
                statusText.innerText = `Prêt pour le Marqueur #${num}`;
                statusText.style.color = "green";
            } else {
                statusText.innerText = "Entrez un numéro entre 1 et 200";
                statusText.style.color = "red";
            }
        });
    </script>
</body>
</html>
